import{f as A,a as y}from"../chunks/_kIjmhgc.js";import{i as O}from"../chunks/D4vY-iYs.js";import{h as E,N as q,O as B,P as H,Q as P,R as j,S as z,k as D,V as G,A as Y,B as w,q as c,C as K,G as f,D as b,F as p,W as u,X as n,Y as Q}from"../chunks/DHZnNhZp.js";import{a as W,l as X,e as J,s as M}from"../chunks/Dd_zfPhs.js";import{i as N}from"../chunks/B8G8jGHZ.js";const Z=Symbol("is custom element"),ee=Symbol("is html");function ae(e){if(E){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var o=e.value;_(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var s=e.checked;_(e,"checked",null),e.checked=s}}};e.__on_r=r,q(r),W()}}function _(e,a,r,o){var s=re(e);E&&(s[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||s[a]!==(s[a]=r)&&(a==="loading"&&(e[B]=r),r==null?e.removeAttribute(a):typeof r!="string"&&se(e).includes(a)?e[a]=r:e.setAttribute(a,r))}function re(e){return e.__attributes??(e.__attributes={[Z]:e.nodeName.includes("-"),[ee]:e.namespaceURI===H})}var C=new Map;function se(e){var a=C.get(e.nodeName);if(a)return a;C.set(e.nodeName,a=[]);for(var r,o=e,s=Element.prototype;s!==o;){r=j(o);for(var l in r)r[l].set&&a.push(l);o=P(o)}return a}function oe(e,a,r=a){var o=z();X(e,"input",s=>{var l=s?e.defaultValue:e.value;if(l=x(e)?U(l):l,r(l),o&&l!==(l=a())){var d=e.selectionStart,m=e.selectionEnd;e.value=l??"",m!==null&&(e.selectionStart=d,e.selectionEnd=Math.min(m,e.value.length))}}),(E&&e.defaultValue!==e.value||D(a)==null&&e.value)&&r(x(e)?U(e.value):e.value),G(()=>{var s=a();x(e)&&s===U(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function x(e){var a=e.type;return a==="number"||a==="range"}function U(e){return e===""?null:+e}async function te(e){const a="https://6671-118-130-112-221.ngrok-free.app",r=encodeURIComponent(e),o=`${a}/fb-video?url=${r}`,s=await fetch(o,{headers:{"ngrok-skip-browser-warning":"true","User-Agent":"Chrome"}});if(!s.ok)throw new Error(`HTTP ${s.status}`);return await s.json()}var le=A('<p class="text-red-500"> </p>'),ne=A('<div class="mt-4"><p class="font-semibold text-green-600">✅ 추출 성공!</p> <video class="w-full mt-2" controls></video> <a class="block mt-2 text-blue-600 underline" target="_blank">⬇️ 수동 다운로드</a></div>',2),ie=A('<main class="p-6 max-w-xl mx-auto space-y-4 svelte-6hcj36"><h1 class="text-2xl font-bold">📽️ Facebook 광고 영상 추출기</h1> <input class="w-full p-2 border rounded" placeholder="Facebook 광고 URL을 붙여넣으세요"/> <button class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded"> </button> <!> <!></main>');function _e(e,a){Y(a,!1);let r=u(""),o=u(null),s=u(""),l=u(!1),d=u("");async function m(){if(!c(r).includes("facebook.com/ads/library/?id=")){n(d,"올바른 Facebook 광고 URL을 입력해주세요.");return}n(l,!0),n(o,null),n(s,""),n(d,"");try{const t=await te(c(r));if(t.videoUrl){n(o,t.videoUrl),n(s,t.title||"facebook_video");const i=document.createElement("a");i.href=c(o),i.download=S(c(s))+".mp4",i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),setTimeout(()=>{n(r,""),n(o,null),n(s,""),n(d,"")},1e3)}else n(d,"동영상을 찾을 수 없습니다.")}catch(t){n(d,`요청 실패: ${t.message}`)}finally{n(l,!1)}}function S(t){return t.replace(/[^a-z0-9가-힣_\- ]/gi,"_").slice(0,50)}O();var g=ie(),k=f(b(g),2);ae(k);var v=f(k,2),F=b(v,!0);p(v);var T=f(v,2);{var I=t=>{var i=le(),h=b(i);p(i),w(()=>M(h,`❌ ${c(d)??""}`)),y(t,i)};N(T,t=>{c(d)&&t(I)})}var R=f(T,2);{var V=t=>{var i=ne(),h=f(b(i),2),L=f(h,2);p(i),w($=>{_(h,"src",c(o)),_(L,"href",c(o)),_(L,"download",$)},[()=>S(c(s))+".mp4"],Q),y(t,i)};N(R,t=>{c(o)&&t(V)})}p(g),w(()=>{v.disabled=c(l),M(F,c(l)?"추출 중...":"🎬 동영상 추출하기")}),oe(k,()=>c(r),t=>n(r,t)),J("click",v,m),y(e,g),K()}export{_e as component};
