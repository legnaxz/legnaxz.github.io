import{f as k,a as b}from"../chunks/BkQsM63d.js";import{i as T}from"../chunks/-vDyiKhK.js";import{h as w,I as D,L as F,N as O,J as C,K as R,M as V,k as q,O as B,A as G,q as s,C as H,G as d,D as m,P as p,F as h,Q as g,B as E}from"../chunks/CKBzfikX.js";import{a as K,l as P,e as $,s as j}from"../chunks/rHzHqiSn.js";import{i as M}from"../chunks/Iior94Vw.js";const J=Symbol("is custom element"),Q=Symbol("is html");function Y(e){if(w){var r=!1,a=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var t=e.value;u(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var o=e.checked;u(e,"checked",null),e.checked=o}}};e.__on_r=a,D(a),K()}}function u(e,r,a,t){var o=z(e);w&&(o[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||o[r]!==(o[r]=a)&&(r==="loading"&&(e[F]=a),a==null?e.removeAttribute(r):typeof a!="string"&&W(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function z(e){return e.__attributes??(e.__attributes={[J]:e.nodeName.includes("-"),[Q]:e.namespaceURI===O})}var N=new Map;function W(e){var r=N.get(e.nodeName);if(r)return r;N.set(e.nodeName,r=[]);for(var a,t=e,o=Element.prototype;o!==t;){a=R(t);for(var l in a)a[l].set&&r.push(l);t=C(t)}return r}function X(e,r,a=r){var t=V();P(e,"input",o=>{var l=o?e.defaultValue:e.value;if(l=x(e)?y(l):l,a(l),t&&l!==(l=r())){var f=e.selectionStart,i=e.selectionEnd;e.value=l??"",i!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(i,e.value.length))}}),(w&&e.defaultValue!==e.value||q(r)==null&&e.value)&&a(x(e)?y(e.value):e.value),B(()=>{var o=r();x(e)&&o===y(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function x(e){var r=e.type;return r==="number"||r==="range"}function y(e){return e===""?null:+e}function Z(e){const r=e.match(/id=(\d+)/);return r?r[1]:null}async function ee(e){try{return(await(await fetch(`https://6aaf-118-130-112-221.ngrok-free.app/fb-video?id=${e}`)).json()).videoUrl||null}catch(r){return console.error("❌ 동영상 추출 실패:",r),null}}var re=k('<p class="mt-4 text-green-700">✅ 광고 ID: <strong> </strong></p>'),ae=k('<div class="mt-6"><p class="text-green-800 font-semibold">🎥 동영상 미리보기:</p> <video class="mt-2 rounded w-full" controls></video> <a class="mt-4 inline-block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">⬇️ 동영상 다운로드</a></div>',2),oe=k('<div class="p-6 max-w-xl mx-auto"><h1 class="text-2xl font-bold mb-4">📺 Facebook 광고 동영상 추출기</h1> <input class="border px-3 py-2 w-full rounded mb-3" type="text" placeholder="예: https://www.facebook.com/ads/library/?id=1234567890"/> <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded w-full">🔍 광고 동영상 추출</button> <!> <!></div>');function de(e,r){G(r,!1);let a=p(""),t=p(null),o=p(null);async function l(){if(g(t,Z(s(a))),!s(t)){alert("❌ 유효한 Facebook 광고 URL이 아닙니다.");return}console.log("✅ 추출된 광고 ID:",s(t)),g(o,await ee(s(t))),s(o)?console.log("✅ 추출된 videoUrl:",s(o)):alert("❌ 동영상을 찾을 수 없습니다.")}T();var f=oe(),i=d(m(f),2);Y(i);var A=d(i,2),I=d(A,2);{var S=n=>{var c=re(),v=d(m(c)),_=m(v,!0);h(v),h(c),E(()=>j(_,s(t))),b(n,c)};M(I,n=>{s(t)&&n(S)})}var U=d(I,2);{var L=n=>{var c=ae(),v=d(m(c),2),_=d(v,2);h(c),E(()=>{u(v,"src",s(o)),u(_,"href",s(o)),u(_,"download",`facebook-ad-${s(t)}.mp4`)}),b(n,c)};M(U,n=>{s(o)&&n(L)})}h(f),X(i,()=>s(a),n=>g(a,n)),$("click",A,l),b(e,f),H()}export{de as component};
