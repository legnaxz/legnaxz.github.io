import{f as A,a as y}from"../chunks/_kIjmhgc.js";import{i as O}from"../chunks/D4vY-iYs.js";import{h as E,N as q,O as B,P as H,Q as P,R as j,S as z,k as D,V as G,A as Y,B as w,q as i,C as K,G as f,D as b,F as p,W as u,X as c,Y as Q}from"../chunks/DHZnNhZp.js";import{a as W,l as X,e as J,s as N}from"../chunks/Dd_zfPhs.js";import{i as T}from"../chunks/B8G8jGHZ.js";const Z=Symbol("is custom element"),ee=Symbol("is html");function ae(e){if(E){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var s=e.value;_(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var o=e.checked;_(e,"checked",null),e.checked=o}}};e.__on_r=r,q(r),W()}}function _(e,a,r,s){var o=re(e);E&&(o[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||o[a]!==(o[a]=r)&&(a==="loading"&&(e[B]=r),r==null?e.removeAttribute(a):typeof r!="string"&&oe(e).includes(a)?e[a]=r:e.setAttribute(a,r))}function re(e){return e.__attributes??(e.__attributes={[Z]:e.nodeName.includes("-"),[ee]:e.namespaceURI===H})}var C=new Map;function oe(e){var a=C.get(e.nodeName);if(a)return a;C.set(e.nodeName,a=[]);for(var r,s=e,o=Element.prototype;o!==s;){r=j(s);for(var l in r)r[l].set&&a.push(l);s=P(s)}return a}function se(e,a,r=a){var s=z();X(e,"input",o=>{var l=o?e.defaultValue:e.value;if(l=x(e)?U(l):l,r(l),s&&l!==(l=a())){var d=e.selectionStart,m=e.selectionEnd;e.value=l??"",m!==null&&(e.selectionStart=d,e.selectionEnd=Math.min(m,e.value.length))}}),(E&&e.defaultValue!==e.value||D(a)==null&&e.value)&&r(x(e)?U(e.value):e.value),G(()=>{var o=a();x(e)&&o===U(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function x(e){var a=e.type;return a==="number"||a==="range"}function U(e){return e===""?null:+e}async function te(e){const a="https://6671-118-130-112-221.ngrok-free.app",r=encodeURIComponent(e),s=`${a}/fb-video?url=${r}`,o=await fetch(s,{headers:{"ngrok-skip-browser-warning":"true"}});if(!o.ok)throw new Error(`HTTP ${o.status}`);return await o.json()}var le=A('<p class="text-red-500"> </p>'),ne=A('<div class="mt-4"><p class="font-semibold text-green-600">✅ 추출 성공!</p> <video class="w-full mt-2" controls></video> <a class="block mt-2 text-blue-600 underline" target="_blank">⬇️ 수동 다운로드</a></div>',2),ie=A('<main class="p-6 max-w-xl mx-auto space-y-4 svelte-6hcj36"><h1 class="text-2xl font-bold">📽️ Facebook 광고 영상 추출기</h1> <input class="w-full p-2 border rounded" placeholder="Facebook 광고 URL을 붙여넣으세요"/> <button class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded"> </button> <!> <!></main>');function _e(e,a){Y(a,!1);let r=u(""),s=u(null),o=u(""),l=u(!1),d=u("");async function m(){if(!i(r).includes("facebook.com/ads/library/?id=")){c(d,"올바른 Facebook 광고 URL을 입력해주세요.");return}c(l,!0),c(s,null),c(o,""),c(d,"");try{const t=await te(i(r));if(t.videoUrl){c(s,t.videoUrl),c(o,t.title||"facebook_video");const n=document.createElement("a");n.href=i(s),n.download=S(i(o))+".mp4",document.body.appendChild(n),n.click(),document.body.removeChild(n)}else c(d,"동영상을 찾을 수 없습니다.")}catch(t){c(d,`요청 실패: ${t.message}`)}finally{c(l,!1)}}function S(t){return t.replace(/[^a-z0-9가-힣_\- ]/gi,"_").slice(0,50)}O();var g=ie(),k=f(b(g),2);ae(k);var v=f(k,2),F=b(v,!0);p(v);var L=f(v,2);{var I=t=>{var n=le(),h=b(n);p(n),w(()=>N(h,`❌ ${i(d)??""}`)),y(t,n)};T(L,t=>{i(d)&&t(I)})}var R=f(L,2);{var V=t=>{var n=ne(),h=f(b(n),2),M=f(h,2);p(n),w($=>{_(h,"src",i(s)),_(M,"href",i(s)),_(M,"download",$)},[()=>S(i(o))+".mp4"],Q),y(t,n)};T(R,t=>{i(s)&&t(V)})}p(g),w(()=>{v.disabled=i(l),N(F,i(l)?"추출 중...":"🎬 동영상 추출하기")}),se(k,()=>i(r),t=>c(r,t)),J("click",v,m),y(e,g),K()}export{_e as component};
