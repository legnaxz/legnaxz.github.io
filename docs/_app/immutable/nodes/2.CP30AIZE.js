import{f as A,a as y}from"../chunks/CaHnjOuT.js";import{i as V}from"../chunks/8Xr108Wg.js";import{h as E,N as $,O,P as B,Q as H,R as P,S as j,k as q,V as D,A as G,B as w,q as c,C as K,G as f,D as b,F as p,W as u,X as i}from"../chunks/BfIqc3Vy.js";import{a as Q,l as W,e as X,s as M}from"../chunks/Cy_N6rYO.js";import{i as N}from"../chunks/DPpfRSoW.js";const Y=Symbol("is custom element"),z=Symbol("is html");function J(e){if(E){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var s=e.value;_(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var o=e.checked;_(e,"checked",null),e.checked=o}}};e.__on_r=r,$(r),Q()}}function _(e,a,r,s){var o=Z(e);E&&(o[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||o[a]!==(o[a]=r)&&(a==="loading"&&(e[O]=r),r==null?e.removeAttribute(a):typeof r!="string"&&ee(e).includes(a)?e[a]=r:e.setAttribute(a,r))}function Z(e){return e.__attributes??(e.__attributes={[Y]:e.nodeName.includes("-"),[z]:e.namespaceURI===B})}var T=new Map;function ee(e){var a=T.get(e.nodeName);if(a)return a;T.set(e.nodeName,a=[]);for(var r,s=e,o=Element.prototype;o!==s;){r=P(s);for(var t in r)r[t].set&&a.push(t);s=H(s)}return a}function ae(e,a,r=a){var s=j();W(e,"input",o=>{var t=o?e.defaultValue:e.value;if(t=x(e)?U(t):t,r(t),s&&t!==(t=a())){var d=e.selectionStart,m=e.selectionEnd;e.value=t??"",m!==null&&(e.selectionStart=d,e.selectionEnd=Math.min(m,e.value.length))}}),(E&&e.defaultValue!==e.value||q(a)==null&&e.value)&&r(x(e)?U(e.value):e.value),D(()=>{var o=a();x(e)&&o===U(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function x(e){var a=e.type;return a==="number"||a==="range"}function U(e){return e===""?null:+e}async function re(e){const a="https://6671-118-130-112-221.ngrok-free.app",r=encodeURIComponent(e),s=`${a}/fb-video?url=${r}`,o=await fetch(s,{headers:{"ngrok-skip-browser-warning":"true","User-Agent":"Chrome"}});if(!o.ok)throw new Error(`HTTP ${o.status}`);return await o.json()}var oe=A('<p class="text-red-500"> </p>'),se=A('<div class="mt-4"><p class="font-semibold text-green-600">✅ 추출 성공!</p> <video class="w-full mt-2" controls></video> <a class="block mt-2 text-blue-600 underline" target="_blank">⬇️ 수동 다운로드</a></div>',2),te=A('<main class="p-6 max-w-xl mx-auto space-y-4 svelte-6hcj36"><h1 class="text-2xl font-bold">📽️ Facebook 광고 영상 추출기</h1> <input class="w-full p-2 border rounded" placeholder="Facebook 광고 URL을 붙여넣으세요"/> <button class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded"> </button> <!> <!></main>');function fe(e,a){G(a,!1);let r=u(""),s=u(null),o=u(""),t=u(!1),d=u("");async function m(){if(!c(r).includes("facebook.com/ads/library/?id=")){i(d,"올바른 Facebook 광고 URL을 입력해주세요.");return}i(t,!0),i(s,null),i(o,""),i(d,"");try{const l=await re(c(r));if(l.videoUrl){i(s,l.videoUrl),i(o,l.filename||"facebook_video.mp4");const n=document.createElement("a");n.href=c(s),n.download=c(o),document.body.appendChild(n),n.click(),document.body.removeChild(n)}else i(d,"동영상을 찾을 수 없습니다.")}catch(l){i(d,`요청 실패: ${l.message}`)}finally{i(t,!1)}}V();var g=te(),k=f(b(g),2);J(k);var v=f(k,2),C=b(v,!0);p(v);var S=f(v,2);{var I=l=>{var n=oe(),h=b(n);p(n),w(()=>M(h,`❌ ${c(d)??""}`)),y(l,n)};N(S,l=>{c(d)&&l(I)})}var R=f(S,2);{var F=l=>{var n=se(),h=f(b(n),2),L=f(h,2);p(n),w(()=>{_(h,"src",c(s)),_(L,"href",c(s)),_(L,"download",c(o))}),y(l,n)};N(R,l=>{c(s)&&l(F)})}p(g),w(()=>{v.disabled=c(t),M(C,c(t)?"추출 중...":"🎬 동영상 추출하기")}),ae(k,()=>c(r),l=>i(r,l)),X("click",v,m),y(e,g),K()}export{fe as component};
