import{f as L,a as y}from"../chunks/BkQsM63d.js";import{i as B}from"../chunks/-vDyiKhK.js";import{h as M,I as D,L as H,N as P,J as V,K as q,M as G,k as K,O as j,A as z,B as x,q as i,C as J,G as _,D as h,F as p,P as b,Q as d}from"../chunks/CKBzfikX.js";import{a as Q,l as Y,e as Z,s as S}from"../chunks/rHzHqiSn.js";import{i as T}from"../chunks/Iior94Vw.js";const W=Symbol("is custom element"),X=Symbol("is html");function ee(e){if(M){var r=!1,a=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var t=e.value;E(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var o=e.checked;E(e,"checked",null),e.checked=o}}};e.__on_r=a,D(a),Q()}}function E(e,r,a,t){var o=re(e);M&&(o[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||o[r]!==(o[r]=a)&&(r==="loading"&&(e[H]=a),a==null?e.removeAttribute(r):typeof a!="string"&&ae(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function re(e){return e.__attributes??(e.__attributes={[W]:e.nodeName.includes("-"),[X]:e.namespaceURI===P})}var I=new Map;function ae(e){var r=I.get(e.nodeName);if(r)return r;I.set(e.nodeName,r=[]);for(var a,t=e,o=Element.prototype;o!==t;){a=q(t);for(var s in a)a[s].set&&r.push(s);t=V(t)}return r}function oe(e,r,a=r){var t=G();Y(e,"input",o=>{var s=o?e.defaultValue:e.value;if(s=A(e)?U(s):s,a(s),t&&s!==(s=r())){var f=e.selectionStart,m=e.selectionEnd;e.value=s??"",m!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(m,e.value.length))}}),(M&&e.defaultValue!==e.value||K(r)==null&&e.value)&&a(A(e)?U(e.value):e.value),j(()=>{var o=r();A(e)&&o===U(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function A(e){var r=e.type;return r==="number"||r==="range"}function U(e){return e===""?null:+e}var se=L('<p class="text-red-500"> </p>'),te=L('<div class="mt-4"><p class="font-semibold text-green-600">✅ 추출 성공!</p> <video class="w-full mt-2" controls></video></div>',2),le=L('<main class="p-6 max-w-xl mx-auto space-y-4"><h1 class="text-2xl font-bold">📽️ Facebook 광고 영상 추출기</h1> <input class="w-full p-2 border rounded" placeholder="Facebook 광고 URL을 붙여넣으세요"/> <button class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded"> </button> <!> <!></main>');function ve(e,r){z(r,!1);let a=b(""),t=b(null),o=b(!1),s=b(""),f="";async function m(){if(!i(a).includes("facebook.com/ads/library/?id=")){d(s,"올바른 Facebook 광고 URL을 입력해주세요.");return}d(o,!0),d(t,null),d(s,""),f="";const l="https://6671-118-130-112-221.ngrok-free.app",n=encodeURIComponent(i(a)),c=`${l}/fb-video?url=${n}`;try{const u=await fetch(c,{headers:{"ngrok-skip-browser-warning":"true"}});if(!u.ok)throw new Error(`HTTP ${u.status}`);const w=await u.json();w.videoUrl?(d(t,w.videoUrl),f=(w.title||"facebook_ad_video").replace(/[^a-zA-Z0-9가-힣-_ ]/g,"").replaceAll(" ","_"),$(i(t),`${f}.mp4`)):d(s,"동영상을 찾을 수 없습니다.")}catch(u){d(s,`요청 실패: ${u.message}`)}finally{d(o,!1)}}function $(l,n){const c=document.createElement("a");c.href=l,c.download=n,c.click()}B();var g=le(),k=_(h(g),2);ee(k);var v=_(k,2),R=h(v,!0);p(v);var N=_(v,2);{var C=l=>{var n=se(),c=h(n);p(n),x(()=>S(c,`❌ ${i(s)??""}`)),y(l,n)};T(N,l=>{i(s)&&l(C)})}var F=_(N,2);{var O=l=>{var n=te(),c=_(h(n),2);p(n),x(()=>E(c,"src",i(t))),y(l,n)};T(F,l=>{i(t)&&l(O)})}p(g),x(()=>{v.disabled=i(o),S(R,i(o)?"추출 중...":"🎬 동영상 추출하기")}),oe(k,()=>i(a),l=>d(a,l)),Z("click",v,m),y(e,g),J()}export{ve as component};
