import{f as A,a as y}from"../chunks/CaHnjOuT.js";import{i as $}from"../chunks/8Xr108Wg.js";import{h as E,N as O,O as B,P as H,Q as P,R as j,S as q,k as D,V as G,A as K,B as w,q as i,C as Q,G as v,D as h,F as b,W as p,X as d}from"../chunks/BfIqc3Vy.js";import{a as W,l as X,e as Y,s as M}from"../chunks/Cy_N6rYO.js";import{i as N}from"../chunks/DPpfRSoW.js";const z=Symbol("is custom element"),J=Symbol("is html");function Z(e){if(E){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var s=e.value;_(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var o=e.checked;_(e,"checked",null),e.checked=o}}};e.__on_r=r,O(r),W()}}function _(e,a,r,s){var o=ee(e);E&&(o[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||o[a]!==(o[a]=r)&&(a==="loading"&&(e[B]=r),r==null?e.removeAttribute(a):typeof r!="string"&&ae(e).includes(a)?e[a]=r:e.setAttribute(a,r))}function ee(e){return e.__attributes??(e.__attributes={[z]:e.nodeName.includes("-"),[J]:e.namespaceURI===H})}var T=new Map;function ae(e){var a=T.get(e.nodeName);if(a)return a;T.set(e.nodeName,a=[]);for(var r,s=e,o=Element.prototype;o!==s;){r=j(s);for(var l in r)r[l].set&&a.push(l);s=P(s)}return a}function re(e,a,r=a){var s=q();X(e,"input",o=>{var l=o?e.defaultValue:e.value;if(l=x(e)?U(l):l,r(l),s&&l!==(l=a())){var f=e.selectionStart,c=e.selectionEnd;e.value=l??"",c!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(c,e.value.length))}}),(E&&e.defaultValue!==e.value||D(a)==null&&e.value)&&r(x(e)?U(e.value):e.value),G(()=>{var o=a();x(e)&&o===U(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function x(e){var a=e.type;return a==="number"||a==="range"}function U(e){return e===""?null:+e}async function oe(e){const a="https://6671-118-130-112-221.ngrok-free.app",r=encodeURIComponent(e),s=`${a}/fb-video?url=${r}`,o=await fetch(s,{headers:{"ngrok-skip-browser-warning":"true"}});if(!o.ok)throw new Error(`HTTP ${o.status}`);return await o.json()}var se=A('<p class="text-red-500"> </p>'),te=A('<div class="mt-4"><p class="font-semibold text-green-600">✅ 추출 성공!</p> <video class="w-full mt-2" controls></video> <a class="block mt-2 text-blue-600 underline" target="_blank">⬇️ 수동 다운로드</a></div>',2),le=A('<main class="p-6 max-w-xl mx-auto space-y-4 svelte-6hcj36"><h1 class="text-2xl font-bold">📽️ Facebook 광고 영상 추출기</h1> <input class="w-full p-2 border rounded" placeholder="Facebook 광고 URL을 붙여넣으세요"/> <button class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded"> </button> <!> <!></main>');function ve(e,a){K(a,!1);let r=p(""),s=p(null),o="",l="",f=p(!1),c=p("");async function C(){if(!i(r).includes("facebook.com/ads/library/?id=")){d(c,"올바른 Facebook 광고 URL을 입력해주세요.");return}d(f,!0),d(s,null),o="",l="",d(c,"");try{const t=await oe(i(r));if(t.videoUrl){d(s,t.videoUrl),o=t.title||"facebook_video",l=t.filename||"video.mp4";const n=document.createElement("a");n.href=i(s),n.download=l,document.body.appendChild(n),n.click(),document.body.removeChild(n)}else d(c,"동영상을 찾을 수 없습니다.")}catch(t){d(c,`요청 실패: ${t.message}`)}finally{d(f,!1)}}$();var g=le(),k=v(h(g),2);Z(k);var u=v(k,2),F=h(u,!0);b(u);var S=v(u,2);{var I=t=>{var n=se(),m=h(n);b(n),w(()=>M(m,`❌ ${i(c)??""}`)),y(t,n)};N(S,t=>{i(c)&&t(I)})}var R=v(S,2);{var V=t=>{var n=te(),m=v(h(n),2),L=v(m,2);_(L,"download",filename),b(n),w(()=>{_(m,"src",i(s)),_(L,"href",i(s))}),y(t,n)};N(R,t=>{i(s)&&t(V)})}b(g),w(()=>{u.disabled=i(f),M(F,i(f)?"추출 중...":"🎬 동영상 추출하기")}),re(k,()=>i(r),t=>d(r,t)),Y("click",u,C),y(e,g),Q()}export{ve as component};
